<mat-card class="userChat-wrapper">
    <mat-card-header>
      <div class="userChat-infos" *ngIf="recipient">
        <div class="profileImg-and-onlineStatus">
          <img class="profile-img" src="{{ recipient.imageUrl }}">
          <img class="online-status" [class.online]="recipient.onlineStatus === 'online'"
           [class.offline]="recipient.onlineStatus === 'offline'">
        </div>
        <span>{{ recipient.name }}</span>
      </div>
  </mat-card-header>
  
  <!-- Chat history -->
    <div #threadContainer class="chat-history">
      <div class="emptyUserChat" *ngIf="emptyUserChat">Starte einen Chat !</div>
      <!--  <div *ngFor="let thread of currentUserChatThreads; let i = index">  -->
        @for(thread of currentUserChatThreads; track thread.timestamp; let i = $index) {
             <app-user-chat-thread [thread]="thread" [userChatId]="currentUserChat?.userChatId" [userChatIndex]="i"></app-user-chat-thread>  
        }
      <!--  </div>  -->
    </div>

    <!-- User Chat Input -->
    <form [formGroup]="channelThreadMessage" class="text-box" *ngIf="currentUserChatThreads">
      <div #imgBox class="add-file-img-box"></div>
      <textarea #threadMessageBox formControlName="channelMessage"
        placeholder="Nachricht an #{{ recipient.name }}"></textarea>
      <div class="interactiv-btn-box">
        <div class="interactive-btns">
  
          <app-add-img-to-message [showImgRef]="imgBox"></app-add-img-to-message>
  
          <div class="border-line"></div>
          <app-emoji-mart
          [emojiImg]="'emoticon.png'"
          [emojiImgHover]="'emoticon-hover.png'"
          [assigningComponent]="'UserChatComponent'"></app-emoji-mart>
  
        </div>
  
        <div class="send-message">
          <button class="not-hover-icon">
            <img src="assets/img/send-message.png" alt="">
          </button>
          <button type="submit" class="hover-icon" (click)="sendMessage(); removeChatInput()">
            <img src="assets/img/send-message-hover.png" alt="">
          </button>
  
        </div>
      </div>
    </form>
  </mat-card>
  
